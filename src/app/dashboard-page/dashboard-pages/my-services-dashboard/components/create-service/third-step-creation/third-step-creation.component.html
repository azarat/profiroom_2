<div class="step-wrapper">
  <form #form="ngForm">
    <div class="form-title">
      <h3>3. Пакеты услуг и цены</h3>
      <div class="pckg-swap">
        <input class="tgl tgl-swp" id="cb2" type="checkbox" name="change-pack-val" [(ngModel)]="userService.allPackages"
          (ngModelChange)="changePackageAmount($event)" />
        <label class="tgl-btn" for="cb2"></label>
        <span>3 пакета</span>
      </div>
    </div>

    <!-------------------- main options -------------------->
    <div class="offer-packages">

      <!-------------------- block hiden 2 pack -------------------->
      <div class="show-all-pack" *ngIf="userService.allPackages !== true">
        <h4>Оформите услуги в трёх ценовых вариантах</h4>
        <p>
          Расширьте свои возможности
        </p>
        <button class="btn" (click)="openAllPackages()">открыть</button>
      </div>

      <!-------------------- packages-name -------------------->
      <div class="package-name line">
        <div>

        </div>
        <div>
          <h6>
            Базовый
          </h6>
        </div>
        <div>
          <h6>
            Стандарт
          </h6>
        </div>
        <div>
          <h6>
            Премиум
          </h6>
        </div>
      </div>
      <!--------------------packages-title -------------------->
      <div class="packages-titles line">
        <div class="packages-title title">
          <p>Название услуги</p>

        </div>
        <div class="packages-title">
          <div class="textarea">
            <textarea [(ngModel)]="userService.packagesTitle.basicTitle" name="basicTitle" rows="2"
              maxlength="35"></textarea>
          </div>

        </div>
        <div class="packages-title">
          <div class="textarea">
            <textarea name="advancedTitle" [(ngModel)]="userService.packagesTitle.advancedTitle"
              [required]="showPackages" rows="2" maxlength="35"></textarea>
          </div>

        </div>
        <div class="packages-title">
          <div class="textarea">
            <textarea name=" premiumTitle" id="" [(ngModel)]="userService.packagesTitle.premiumTitle"
              [required]="showPackages" rows="2" maxlength="35"></textarea>
          </div>

        </div>
      </div>
      <!-------------------- Descriptions -------------------->
      <div class="packages-description line">
        <div class="description-title">
          <p>
            Краткое описание
          </p>
        </div>
        <div class="textarea-wrap">
          <div class="textarea">
            <textarea name="basicDescription" id="" [(ngModel)]="userService.packagesDescriptions.basicDescription"
              maxlength="270"></textarea>
          </div>

        </div>
        <div class="textarea-wrap">
          <div class="textarea">
            <textarea name="advancedDescription" id=""
              [(ngModel)]="userService.packagesDescriptions.advancedDescription" [required]="showPackages"
              maxlength="270"></textarea>
          </div>

        </div>
        <div class="textarea-wrap">
          <div class="textarea">
            <textarea name="premiumDescription" id="" [(ngModel)]="userService.packagesDescriptions.premiumDescription"
              [required]="showPackages" maxlength="270"></textarea>
          </div>

        </div>
      </div>
      <!--------------------Time to Do -------------------->
      <div class="package-deadlines line">
        <div class="deadline-title title">
          <p>
            Сроки (дней)
          </p>
        </div>
        <div>
          <div class="input-wrap">
            <input name="basicTerm" type="text" knifeOnlyNumbers maxlength="3"
              [(ngModel)]="userService.packagesTerms.basicTerm">
          </div>

        </div>
        <div>
          <div class="input-wrap">
            <input name="advancedTerm" type="text" knifeOnlyNumbers maxlength="3" [required]="showPackages"
              [(ngModel)]="userService.packagesTerms.advancedTerm">
          </div>

        </div>
        <div>
          <div class="input-wrap">
            <input name="premiumTerm" type="text" knifeOnlyNumbers maxlength="3"
              [(ngModel)]="userService.packagesTerms.premiumTerm" [required]="showPackages">
          </div>

        </div>
      </div>

      <!-------------------- packages changes -------------------->
      <div class="packages-changes line">
        <div class="packages-change title">
          <p>Кол-во правок</p>
        </div>
        <div>
          <div class="select-wrap">
            <mat-select [(ngModel)]="userService.packagesChanges.basicChange" name="basicChange">
              <mat-option *ngFor="let change of changesArrayCounter(); let i = index" [value]="change">
                {{ change }}
              </mat-option>
            </mat-select>
          </div>
        </div>
        <div>
          <div class="select-wrap">
            <mat-select [required]="showPackages" [(ngModel)]="userService.packagesChanges.advancedChange"
              name="advancedChange">
              <mat-option *ngFor="let change of changesArrayCounter(); let i = index" [value]="change">
                {{ change }}
              </mat-option>
            </mat-select>
          </div>
        </div>
        <div>
          <div class="select-wrap">
            <mat-select [required]="showPackages" [(ngModel)]="userService.packagesChanges.premiumChange"
              name="premiumChange">
              <mat-option *ngFor="let change of changesArrayCounter(); let i = index" [value]="change">
                {{ change }}
              </mat-option>
            </mat-select>
          </div>
        </div>
      </div>
      <!--------------------package price -------------------->
      <div class="package-deadlines line">
        <div class="deadline-title title">
          <p>
            Цена
          </p>
        </div>
        <div>
          <div class="input-wrap">
            <input type="text" knifeOnlyNumbers maxlength="7" [(ngModel)]="userService.packagesPrices.basicPrice"
              name="basicPrice">
          </div>

        </div>
        <div>
          <div class="input-wrap">
            <input type="text" knifeOnlyNumbers [(ngModel)]="userService.packagesPrices.advancedPrice"
              [required]="showPackages" name="advancedPrice">
          </div>

        </div>
        <div>
          <div class="input-wrap">
            <input type="text" knifeOnlyNumbers [(ngModel)]="userService.packagesPrices.premiumPrice"
              [required]="showPackages" name="premiumPrice">
          </div>

        </div>
      </div>
      <!--------------------add options -------------------->
      <div class="package-options ">
        <div class="added-option line" *ngFor="let arrayItem of userService.main_options; let i = index"
          >


          <div class="option-title">
            <div class="input-wrap">
              <input type="text" [(ngModel)]="userService.main_options[i].title" name="main-option-title"
                placeholder="Название опции" maxlength="15">
            </div>
            <i class="material-icons delete-pack" (click)="deleteMainOption(i)">delete</i>
            <!-- <span >delete</span> -->
          </div>
          <div class="checkbox-wrap">
            <input class="tgl tgl-classic" id="basic_{{ i }}" type="checkbox" name="main-option-basic"
              [(ngModel)]="userService.main_options[i].basic">
            <label for="basic_{{ i }}"></label>
          </div>
          <div class="checkbox-wrap">
            <input class="tgl tgl-classic" id="standart_{{ i }}" type="checkbox" name="main-option-advanced"
              [(ngModel)]="userService.main_options[i].advanced">
            <label for="standart_{{ i }}"></label>
          </div>
          <div class="checkbox-wrap">
            <input class="tgl tgl-classic" id="premium_{{ i }}" type="checkbox" name="main-option-premium"
              [(ngModel)]="userService.main_options[i].premium">
            <label for="premium_{{ i }}"></label>
          </div>
        </div>
        <div class="add-option" *ngIf=" !userService.mainOptions || userService.main_options.length < 10">

          <span class="add" (click)="addMainOptin()">
            <i class="material-icons">
              add_circle_outline
            </i>
            <span>Добавить опцию</span>
          </span>
        </div>
      </div>
    </div>
    <!-------------------- Extra Options -------------------->
    <div class="extra-packages-wrap">
      <h4>дополнительно к пакетам услуг </h4>
      <div class="extra-packages">
        <!-------------------- Options Items   -------------------->

        <!--------------------  Deadlines -------------------->
        <div class="time-option">
          <div class="option-wrap">
            <div class="checkbox">
              <input type="checkbox" name="time-to-do" class="tgl-classic"
                [(ngModel)]="userService.compressedDeadlines.useCompressedDeadlines" id="time-to-do">
              <label for="time-to-do"></label>
              <span class="options-name">Сжатые сроки</span>
            </div>
            <div class="options" *ngIf="showPackages !== true">
              <span>Сделаю за</span>
              <div>
                <div class=" select-wrap-extra">
                  <mat-select [(ngModel)]="userService.compressedDeadlines.basicCompressedDays"
                    name="basicCompressedDays">
                    <mat-option *ngFor="let days of changesArrayCounter(); let i = index" [value]="days">
                      {{ days }}
                    </mat-option>
                  </mat-select>
                </div>
              </div>
              <div class="price">
                <input type="text" knifeOnlyNumbers maxlength="4"
                  [(ngModel)]="userService.compressedDeadlines.basicCompressedPrice" name="basicCompressedPrice"> <span
                  class="money">UAH</span>
              </div>
            </div>
            <button class="show-pack-options" [ngClass]="optionsVisible ? 'up' : 'down'" (click)="showOptions()"
              *ngIf="showPackages == true"></button>
          </div>
          <!-------------------- Exta Options if All Packages -------------------->
          <div class="all-types" [ngClass]="optionsVisible ? 'open' : 'closed'">
            <div *ngIf="showPackages === true">
              <div>
                <div class="extraoption-title">Базовый</div>
                <div class="options">
                  <span>Сделаю за</span>
                  <div>
                    <div class=" select-wrap-extra">
                      <mat-select
                        [(ngModel)]="userService.compressedDeadlines.basicCompressedDays" name="basicCompressedDays">
                        <mat-option *ngFor="let days of changesArrayCounter(); let i = index" [value]="days">
                          {{ days }}
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                  <div class="price">
                    <input type="text" knifeOnlyNumbers maxlength="4"
                      [(ngModel)]="userService.compressedDeadlines.basicCompressedPrice" name="basicCompressedPrice">
                    <span class="money">UAH</span>
                  </div>
                </div>
              </div>
              <div>
                <div class="extraoption-title">Стандарт</div>
                <div class="options">
                  <span>Сделаю за</span>
                  <div>
                    <div class=" select-wrap-extra">
                      <mat-select [(ngModel)]="userService.compressedDeadlines.advancedCompressedDays" name="advancedCompressedDays">
                        <mat-option *ngFor="let days of changesArrayCounter(); let i = index" [value]="days">
                          {{ days }}
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                  <div class="price">
                    <input type="text" knifeOnlyNumbers maxlength="4" name="advancedCompressedPrice" [(ngModel)]="userService.compressedDeadlines.advancedCompressedPrice"> <span class="money">UAH</span>
                  </div>
                </div>
              </div>
              <div>
                <div class="extraoption-title">Премиум</div>
                <div class="options">
                  <span>Сделаю за</span>
                  <div>
                    <div class=" select-wrap-extra">
                      <mat-select name="premiumCompressedDays" [(ngModel)]="userService.compressedDeadlines.premiumCompressedDays">
                        <mat-option *ngFor="let days of changesArrayCounter(); let i = index" [value]="days">
                          {{ days }}
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                  <div class="price">
                    <input type="text" knifeOnlyNumbers maxlength="4" name="premiumCompressedPrice" [(ngModel)]="userService.compressedDeadlines.premiumCompressedPrice"> <span class="money">UAH</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-------------------- //** deadlines -------------------->

        <!-------------------- extra changes  -------------------->
        <div class="deffault-field">
          <div class="option-wrap">
            <div class="checkbox">
              <input type="checkbox" name="useExtraOfferChanges" [(ngModel)]="userService.extraOfferChanges.useExtraOfferChanges"  class="tgl-classic" id="extra-changes">
              <label for="extra-changes"></label>
              <span class="options-name">Дополнительные правки</span>
            </div>
            <div class="options">
              <span>Сделаю за</span>
              <div>
                <div class=" select-wrap-extra">
                  <mat-select name="extraOfferChanges" [(ngModel)]="userService.extraOfferChanges.extraChangesDays">
                    <mat-option *ngFor="let days of changesArrayCounter(); let i = index" [value]="days">
                      {{ days }}
                    </mat-option>
                  </mat-select>
                </div>
              </div>
              <div class="price">
                <input type="text" name="extraChangesPrice" knifeOnlyNumbers [(ngModel)]="userService.extraOfferChanges.extraChangesPrice" maxlength="4"> <span class="money">UAH</span>
              </div>
            </div>
          </div>
        </div>
        <!-- //** extra changes -->
        <!--  commercila use -->
        <div class="deffault-field">
          <div class="option-wrap">
            <div class="checkbox">
              <input type="checkbox" name="useCommercialOffer" class="tgl-classic" id="commercial-use" [(ngModel)]="userService.commercialOffer.useCommercialOffer">
              <label for="commercial-use"></label>
              <span class="options-name">Коммерческое использование</span>
            </div>
            <div class="options commercial">
              <span>Сделаю за</span>
              <div class="price">
                <input type="text" knifeOnlyNumbers maxlength="4" [(ngModel)]="userService.commercialOffer.priceForCommercialOffer" name="priceForCommercialOffer"> <span class="money">UAH</span>
              </div>
            </div>

          </div>
        </div>
        <!--  // commercila use -->
        <!--  **************************************   [(ngModel)]="userService.extraOptions[j].optionDescription" -->
        <!-- Add extra Option -->
        <div class="secondary-extra-options">
          <div class="secondary-extra-options-item" *ngFor=" let option of userService.extra_features; let j = index"
            >
            <div class="display-option" *ngIf="j > 0">
              <div class="display-title">
                {{ j }}
              </div>
            </div>
            <div class="option-creation">
              <div class="extra-option-title">
                <h5>Название опции</h5>
                <div>
                  <input type="text" name="optionTitle" [(ngModel)]="userService.extra_features[j].optionTitle" required>
                </div>

              </div>
              <div class="extra-option-description">
                <h5>Описание </h5>
                <div>
                  <textarea name="optionDescription" [(ngModel)]="userService.extra_features[j].optionDescription" required></textarea>
                </div>

              </div>
              <div>
                <div class="deffault-field extra-option">
                  <div class="option-wrap">

                    <div class="options">
                      <span>Сделаю за</span>
                      <div>
                        <div class=" select-wrap-extra">
                          <mat-select name="optionPrice" required [(ngModel)]="userService.extraOfferChanges[j].optionPrice">
                            <mat-option *ngFor="let days of changesArrayCounter(); let i = index" [value]="days">
                              {{ days }}
                            </mat-option>
                          </mat-select>
                        </div>
                      </div>
                      <div class="price">
                        <input type="text" name="optionPerTime" [(ngModel)]="userService.extra_features[j].optionPerTime" required knifeOnlyNumbers maxlength="4">
                        <span class="money">UAH</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!---------- Add Extra field to secondary option ------->
        <div class="add-option secondary-optins" *ngIf=" !userService.extraOptions || userService.extra_features.length < 10">
          <!-- [disabled]="packagesForm.controls['extraOptions'].invalid" -->
          <button class="add btn-tetraty" (click)="addExtraOptin()">
            <i class="material-icons">
              add_circle_outline
            </i>
            <span>Добавить опцию</span>
          </button>
        </div>
      </div>


    </div>

    <div class="form-butons">
      <button class="back">сохранить и выйти</button>
      <button class="save" (click)="saveStep()">сохранить и продолжить</button>
    </div>
  </form>
</div>
